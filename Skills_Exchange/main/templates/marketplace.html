{% extends "base.html" %}
{% load static %}

{% block title %}Skill Marketplace | SkillSwap{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
<style>
    .custom { margin: 20px 0px !important; }
    .active { color: white !important; }
    .link { color: #4361ee !important; }

    .skills-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
        gap: 20px;
    }

    .skill-card {
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        padding: 20px;
        transition: transform 0.2s ease;
    }

    .skill-card:hover {
        transform: translateY(-4px);
    }

    .skill-card h3 {
        color: #2563EB;
        font-size: 1.2rem;
        margin-bottom: 8px;
    }

    .skill-card p {
        font-size: 0.9rem;
        color: #475569;
    }

    .filters-sidebar {
        position: sticky;
        top: 90px;
    }

    .category-list {
        padding-left: 0;
    }

    .category-link {
        color: #1e293b;
        background: #f8fafc;
        text-decoration: none;
        transition: all 0.2s ease;
        font-size: 0.95rem;
        font-weight: 500;
    }

    .category-link:hover {
        background-color: #e0ecff;
        color: #2563eb;
        transform: translateX(3px);
    }

    .category-link.active {
        background-color: #2563eb;
        color: white !important;
        font-weight: 600;
        box-shadow: 0 2px 6px rgba(37, 99, 235, 0.3);
    }
</style>
{% endblock %}

{% block content %}
<section class="marketplace-hero py-5 text-center bg-light">
    <div class="container">
        <h1 class="fw-bold">Discover Skill Collaborations</h1>
        <p class="text-muted">
            Exchange skills, connect with others, and collaborate creatively â€” no money involved!
        </p>
    </div>
</section>

<div class="container py-5">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3">
            <div class="filters-sidebar p-3 bg-white rounded-3 shadow-sm">
                <h4 class="mb-3 text-primary fw-semibold">
                    <i class="fa-solid fa-layer-group me-2"></i>Categories
                </h4>
                <ul class="list-unstyled mb-0 category-list">
                    {% for category in categories %}
                        <li class="mb-2">
                            <a href="?category={{ category.id }}"
                               class="category-link d-block px-3 py-2 rounded-2 {% if request.GET.category == category.id|stringformat:'s' %}active{% endif %}">
                                {{ category.name }}
                            </a>
                        </li>
                    {% empty %}
                        <li class="text-muted">No categories yet.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <!-- Skills -->
        <div class="col-md-9">
            <div class="skills-header mb-4">
                <h2 id="skillsCount">Available Skills</h2>
            </div>

            <div class="skills-grid" id="skillsGrid">
                {% for uskill in skills %}
                    <div class="skill-card">
                        <h3>{{ uskill.skill.name }}</h3>
                        <p>Category: {{ uskill.skill.category.name }}</p>
                        <p>Proficiency: {{ uskill.proficiency|default:"N/A" }}</p>
                        <p>Experience: {{ uskill.experience_years|default:"N/A" }} years</p>
                        <p>By: <a href="{% url 'profile' uskill.user.id %}" class="text-decoration-none">{{ uskill.user.username }}</a></p>
                    </div>
                {% empty %}
                    <p>No skills found for this category.</p>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
